<%@ page contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<%
	// ex03_05.jsp 요청			?num=5
	// request.getParameter("num") == null
	// Integer.parseInt(null) 500 서버 오류 발생
	int num = Integer.parseInt(request.getParameter("num")); // 파라미터 부여는 위에서 하자
	// 처음 새로고침 하면 null이 넘어가기 때문에 500에러가 뜸
	
	(num == null) ? -1 : Integer.parseInt(num);
	
%>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>합계 계산기</title>
    <link
      rel="shortcut icon"
      type="image/x-icon"
      href="http://localhost/jspPro/images/SiSt.ico"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="http://localhost/jspPro/resources/cdn-main/example.css"
    />
    <script src="http://localhost/jspPro/resources/cdn-main/example.js"></script>
    <style>
      span.material-symbols-outlined {
        vertical-align: text-bottom;
      }
      body {
        text-align: center;
        margin-top: 50px;
      }
      input[type="text"] {
        width: 200px;
        padding: 10px;
        font-size: 16px;
      }
      p#demo {
        margin-top: 20px;
        font-size: 18px;
        color: #333;
      }
    </style>
  </head>
  <body>
    <header>
      <h1 class="main">
        <a href="#" style="position: absolute; top: 30px">jyoons HOme</a>
      </h1>
      <ul>
        <li><a href="#">로그인</a></li>
        <li><a href="#">회원가입</a></li>
      </ul>
    </header>
    <div>
      <xmp class="code">
      		500번 오류는 자바 코드 오류임
      </xmp>
      <!-- 
      // 문제2
      // 가운데 커서, 포커스
      // 숫자 유효성 검사(js)
      // 엔터치면 [스트립트릿 - 서버에서 처리] 1+2+3=6 이거 뽑아내기
      // 다시 입력창 선택됨
      -->
      <!-- <form> -->
      정수 : <input type="text" id="num" autofocus="autofocus" name ="num"/><br />
      <p id="demo">
	  <% 
	   int sum = 0;
	   for(int i = 1 ; i<= num;  i++) { // 위의 변수 num
	      sum += i ;
		%><%= i%>+	<%
			} //for	
	  %>=<%= sum%>
	 </p>
      <!-- </form> -->
    </div>


   <script>
	      $("#num").css("text-align","center")
	      .on({
	    	  "keydown":function(e) {
	    		  if ( !(e.which >= 48 && e.which <= 57
	    	              || e.which == 8
	    	              || e.which == 13
	    	              || e.which == 229
	    	          )) {
	    			  alert("숫자만 입력하세요.");
	    			  e.preventDefault();
	    		  } // if
	    	  },
			 "keyup":function(e) {
	    		if (event.which == 13) {
					// js BOM
					// $("form").submit();
					let numValue = $("#num").val();;
					location.href = `ex03_05.jsp?num=\${numValue}`; // 파라미터 값을 만든 것임
				} // if
	    	  }
	      });
    </script>
  </body>
</html>
